#!/bin/bash

# quickping $HERMES_ETHERNET && \
#     time push hermes || echo "Could not push to hermes"

if [[ -d /Volumes/tank/src/pushme ]]; then
    time push tank || echo "Could not push to tank"

    time b2-restic /Volumes/tank tank
fi

time reindex-mail || echo reindex-mail failed

mkdir ~/.local/share/recoll/xapiandb || echo xapiandb exists
time recollindex -z || echo recollindex failed

cd ~/doc/johnwiegley

nix-build
time ./result/bin/publish-johnwiegley

update ~/dfinity
update ~/src

(cd ~/src/emacs; git pull)

exec u vulcan update
