#!/bin/bash

#CABAL=/usr/local/bin/cabal
CABAL=$HOME/.cabal/bin/cabal

if (( $# > 0 )); then
    cmd=$1
    shift 1

    if [[ $cmd == install ]]; then
        if [[ $(readlink /usr/local/opt/ghc) =~ -prof$ ]]; then
            exec $CABAL $cmd -j --haddock-hoogle                        \
                --haddock-html --haddock-executables --haddock-internal \
                --haddock-hyperlink-source "$@"
        else
            exec $CABAL $cmd -j --enable-library-profiling              \
                --haddock-hoogle --haddock-html --haddock-executables   \
                --haddock-internal --haddock-hyperlink-source "$@"
        fi
    else
        exec $CABAL $cmd "$@"
    fi
else
    exec $CABAL
fi
