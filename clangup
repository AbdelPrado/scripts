#!/bin/bash

set -e

cd ~/src/llvm && git pull
cd ~/src/clang && git pull
cd test/Embt && git pull

cd ~/Products/llvm/main
/bin/rm -fr *
cmake ~/src/llvm

if ! make-distcc; then
    notify "Clang failed to build"
else
    if ! make clang-test; then
        notify "Clang failed tests"
    fi
fi

exit 0
