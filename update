#!/bin/bash

if [[ "$1" == "-a" || "$1" == "--all" ]]; then
    if ! running fetchmail; then
        getmail &
    fi
fi

cabal-update $1
brew-update $1

if [[ "$1" == "--all" || "$1" == "-a" ]]; then
    find ~/Archives ~/Contracts ~/Mirrors ~/Projects            \
        ! -path '*/Archives/Systems/.git'                       \
        ! -path '*/Contracts/TI/lib/ANSI/.git'                  \
        ! -path '*/Contracts/TI/bugslayer/.git'                 \
        ! -path '*/Contracts/FPComplete/Projects/fpco/.git'     \
        -name .git -type d | parallel -j4 git all fetch {//}
fi

exit 0
